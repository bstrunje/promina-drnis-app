==> Cloning from https://github.com/bstrunje/promina-drnis-app
==> Checking out commit 959b2bd926947c713bf10d30bcc53362ce1242f8 in branch main
==> Requesting Node.js version 20.x
==> Using Node.js version 20.18.3 via /opt/render/project/src/backend/package.json
==> Docs on specifying a Node.js version: https://render.com/docs/node-version
==> Using Bun version 1.1.0 (default)
==> Docs on specifying a bun version: https://render.com/docs/bun-version
==> Running build command 'npm install && npm run build'...
added 453 packages, and audited 455 packages in 14s
50 packages are looking for funding
  run `npm fund` for details
4 vulnerabilities (2 moderate, 2 high)
To address all issues (including breaking changes), run:
  npm audit fix --force
Run `npm audit` for details.
> @promina-drnis-app/backend@1.0.0 build
> tsc
==> Uploading build...
==> Build uploaded in 8s
==> Build successful 🎉
==> Deploying...
==> Requesting Node.js version 20.x
==> Using Node.js version 20.18.3 via /opt/render/project/src/backend/package.json
==> Docs on specifying a Node.js version: https://render.com/docs/node-version
==> Running 'npm start'
> @promina-drnis-app/backend@1.0.0 start
> node dist/server.js
file:///opt/render/project/src/backend/dist/app.js:78
    app.use(express.static(path.join(__dirname, '../../frontend/dist')));
                                     ^
ReferenceError: __dirname is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/opt/render/project/src/backend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
    at file:///opt/render/project/src/backend/dist/app.js:78:38
    at ModuleJob.run (node:internal/modules/esm/module_job:234:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:473:24)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:122:5)
Node.js v20.18.3
npm error Lifecycle script `start` failed with error:
npm error code 1
npm error path /opt/render/project/src/backend
npm error workspace @promina-drnis-app/backend@1.0.0
npm error location /opt/render/project/src/backend
npm error command failed
npm error command sh -c node dist/server.js
==> Requesting Node.js version 20.x
==> Using Node.js version 20.18.3 via /opt/render/project/src/backend/package.json
==> Docs on specifying a Node.js version: https://render.com/docs/node-version
==> Exited with status 1
==> Common ways to troubleshoot your deploy: https://render.com/docs/troubleshooting-deploys
==> Running 'npm start'
> @promina-drnis-app/backend@1.0.0 start
> node dist/server.js
file:///opt/render/project/src/backend/dist/app.js:78
    app.use(express.static(path.join(__dirname, '../../frontend/dist')));
                                     ^
ReferenceError: __dirname is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/opt/render/project/src/backend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
    at file:///opt/render/project/src/backend/dist/app.js:78:38
    at ModuleJob.run (node:internal/modules/esm/module_job:234:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:473:24)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:122:5)
Node.js v20.18.3
npm error Lifecycle script `start` failed with error:
npm error code 1
npm error path /opt/render/project/src/backend
npm error workspace @promina-drnis-app/backend@1.0.0
npm error location /opt/render/project/src/backend
npm error command failed
npm error command sh -c node dist/server.js

PS C:\sinkronizacija\promina-drnis-app\backend> npm run build

> @promina-drnis-app/backend@1.0.0 build
> tsc

PS C:\sinkronizacija\promina-drnis-app\backend> npm start    

> @promina-drnis-app/backend@1.0.0 start
> node dist/server.js

🏃 Current directory: C:\sinkronizacija\promina-drnis-app\backend
📁 Loading .env from: C:\sinkronizacija\promina-drnis-app\backend\.env
⚙️  Environment configuration: {
  PORT: '3000 (Web Server)',
  DATABASE_URL: 'Set (Hidden for security)',
  JWT_SECRET: 'Set (Hidden for security)',
  NODE_ENV: 'development'
}
Database query error: {
  query: 'SELECT 1',
  error: 'The server does not support SSL connections'
}
❌ Database connection error: Error: The server does not support SSL connections
    at C:\sinkronizacija\promina-drnis-app\node_modules\pg-pool\index.js:45:11  
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Object.query (file:///C:/sinkronizacija/promina-drnis-app/backend/dist/utils/db.js:48:28)
    at async checkDatabaseConnection (file:///C:/sinkronizacija/promina-drnis-app/backend/dist/server.js:49:9)
    at async startServer (file:///C:/sinkronizacija/promina-drnis-app/backend/dist/server.js:63:29)
❌ Failed to start application: Error: Unable to connect to database
    at startServer (file:///C:/sinkronizacija/promina-drnis-app/backend/dist/server.js:65:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
❌ Failed to start application: Error: Unable to connect to database
    at startServer (file:///C:/sinkronizacija/promina-drnis-app/backend/dist/server.js:65:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
npm error Lifecycle script `start` failed with error:
npm error code 1
npm error path C:\sinkronizacija\promina-drnis-app\backend
npm error workspace @promina-drnis-app/backend@1.0.0
npm error location C:\sinkronizacija\promina-drnis-app\backend
npm error command failed
npm error command C:\WINDOWS\system32\cmd.exe /d /s /c node dist/server.js      
PS C:\sinkronizacija\promina-drnis-app\backend> 