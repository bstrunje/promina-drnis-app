{
  "version": 2,
  "buildCommand": "npm run build:vercel",
  "outputDirectory": "frontend/dist",
  "rewrites": [
    { 
      "source": "/:orgSlug/api/system-manager/:path*", 
      "destination": "/api/system-manager/:path*"
    },
    { 
      "source": "/:orgSlug/api/:path*", 
      "destination": "/api/:path*"
    },
    { 
      "source": "/uploads/:path*", 
      "destination": "/api/[...slug]" 
    },
    { 
      "source": "/health", 
      "destination": "/api/[...slug]" 
    },
    {
      "source": "/assets/:path*",
      "destination": "/assets/:path*"
    },
    {
      "source": "/:orgSlug/assets/:path*",
      "destination": "/assets/:path*"
    },
    {
      "source": "/pwa/:path*",
      "destination": "/pwa/:path*"
    },
    {
      "source": "/:orgSlug/pwa/:path*",
      "destination": "/pwa/:path*"
    },
    { 
      "source": "/api/system-manager/:path*", 
      "destination": "/api/[...slug]" 
    },
    { 
      "source": "/api/:path*", 
      "destination": "/api/[...slug]" 
    },
    {
      "source": "/service-worker.js",
      "destination": "/service-worker.js"
    },
    {
      "source": "/:orgSlug/service-worker.js",
      "destination": "/service-worker.js"
    },
    {
      "source": "/favicon.ico",
      "destination": "/favicon.ico"
    },
    {
      "source": "/:orgSlug/favicon.ico",
      "destination": "/favicon.ico"
    },
    {
      "source": "/logo.png",
      "destination": "/logo.png"
    },
    {
      "source": "/:orgSlug/logo.png",
      "destination": "/logo.png"
    },
    {
      "source": "/robots.txt",
      "destination": "/robots.txt"
    },
    {
      "source": "/:orgSlug/robots.txt",
      "destination": "/robots.txt"
    },
    {
      "source": "/sitemap.xml",
      "destination": "/sitemap.xml"
    },
    {
      "source": "/:orgSlug/sitemap.xml",
      "destination": "/sitemap.xml"
    },
    { 
      "source": "/system-manager/:path*", 
      "destination": "/index.html" 
    },
    { 
      "source": "/:orgSlug/:path*", 
      "destination": "/index.html" 
    }
  ]
}